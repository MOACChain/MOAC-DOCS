

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ERC20 Token &mdash; moac-core-master  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ERC721 Token" href="ERC721.html" />
    <link rel="prev" title="Differences Between Wallet Types" href="Differences-Between-Wallet-Types.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> moac-core-master
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="HOME.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessWallet.html">How to Access Your Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chain3.html">Chain3 JavaScript API</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkBalance.html">Checking the Balance of Your Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Console.html">Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Differences-Between-Wallet-Types.html">Differences Between Wallet Types</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ERC20 Token</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-your-own-erc20-token-on-the-moac-blockchain">Creating your own ERC20 Token on the MOAC blockchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-the-erc20-token-smart-contract">Write the ERC20 token smart contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-a-ready-open-source-library">Using a ready open source library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#developing-your-smart-contract-directly">Developing your smart contract directly</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#compile-and-deploy-erc20-token-smart-contract">Compile and deploy ERC20 token smart contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-moac-wallet">Using MOAC wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remix">Remix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-node-js-packages">Using the Node.Js packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ERC721.html">ERC721 Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-To-Create-a-Wallet.html">How-To-Create-a-Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON-RPC.html">JSON-RPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="MoveToMoac.html">Move to Moac</a></li>
<li class="toctree-l1"><a class="reference internal" href="protectFunds.html">Protecting Yourself and Your Funds</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">JSON RPC API</a></li>
<li class="toctree-l1"><a class="reference internal" href="saveAndBackup.html">Safe Storage of Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="SCS.html">SCS</a></li>
<li class="toctree-l1"><a class="reference internal" href="SCSCreateSteps.html">MOAC Pizza Alpha (Pangu 0.8.3 prerelease)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="Versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="VNODE.html">MOAC VNODE</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainDAPPDeveloper.html">DAPP Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainSCSMiner.html">MicroChain SCS Miner</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainUsers.html">MicroChain User</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroChainVNODEProxy.html">VNODE-PROXY</a></li>
<li class="toctree-l1"><a class="reference internal" href="TXdebug.html">TXdebug</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">moac-core-master</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ERC20 Token</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ERC20.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="erc20-token">
<h1>ERC20 Token<a class="headerlink" href="#erc20-token" title="Permalink to this headline">¶</a></h1>
<div class="section" id="creating-your-own-erc20-token-on-the-moac-blockchain">
<h2>Creating your own ERC20 Token on the MOAC blockchain<a class="headerlink" href="#creating-your-own-erc20-token-on-the-moac-blockchain" title="Permalink to this headline">¶</a></h2>
<p>Before you read this page, you should:</p>
<ul class="simple">
<li>Understand the following general concepts: blockchain, smart
contracts, ERC20 tokens;</li>
<li>Be able to write a basic Ethereum smart contract in Solidity (see
tutorial example);</li>
</ul>
<p>After you read this page, you will be able to:</p>
<ul class="simple">
<li>Write your own ERC20 token contract;</li>
<li>Compile and deploy it on the MOAC blockchain;</li>
<li>Use the ERC20 token;</li>
</ul>
</div>
<div class="section" id="write-the-erc20-token-smart-contract">
<h2>Write the ERC20 token smart contract<a class="headerlink" href="#write-the-erc20-token-smart-contract" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://theethereum.wiki/w/index.php/ERC20_Token_Standard">ERC20
standard</a>
is developed by the Ethereum community.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">contract</span> <span class="n">ERC20Token</span> <span class="p">{</span>
  <span class="n">string</span>  <span class="n">public</span> <span class="n">name</span><span class="p">;</span>
  <span class="n">string</span>  <span class="n">public</span> <span class="n">symbol</span><span class="p">;</span>
  <span class="n">uint</span>    <span class="n">public</span> <span class="n">decimals</span><span class="p">;</span>
  <span class="n">uint256</span> <span class="n">public</span> <span class="n">totalSupply</span><span class="p">;</span>

  <span class="n">function</span> <span class="n">balanceOf</span><span class="p">(</span><span class="n">address</span> <span class="n">_owner</span><span class="p">)</span> <span class="n">public</span> <span class="n">constant</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint256</span> <span class="n">balance</span><span class="p">);</span>
  <span class="n">function</span> <span class="n">transfer</span><span class="p">(</span><span class="n">address</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">);</span>
  <span class="n">function</span> <span class="n">transferFrom</span><span class="p">(</span><span class="n">address</span> <span class="n">_from</span><span class="p">,</span> <span class="n">address</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">);</span>
  <span class="n">function</span> <span class="n">approve</span><span class="p">(</span><span class="n">address</span> <span class="n">_spender</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">);</span>
  <span class="n">function</span> <span class="n">allowance</span><span class="p">(</span><span class="n">address</span> <span class="n">_owner</span><span class="p">,</span> <span class="n">address</span> <span class="n">_spender</span><span class="p">)</span> <span class="n">public</span> <span class="n">constant</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint256</span> <span class="n">remaining</span><span class="p">);</span>
  <span class="n">event</span> <span class="n">Transfer</span><span class="p">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">);</span>
  <span class="n">event</span> <span class="n">Approval</span><span class="p">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_owner</span><span class="p">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_spender</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>User can develop its own ERC20 token. For that, we can either use a
ready open source library to help with the task, or write the needed
smart contracts directly from scratch. We will show both methods below
so you can master your ERC20 token development skills.</p>
<div class="section" id="using-a-ready-open-source-library">
<h3>Using a ready open source library<a class="headerlink" href="#using-a-ready-open-source-library" title="Permalink to this headline">¶</a></h3>
<p>Let’s see how you can implement this interface by taking advantage of
the OpenZeppelin Solidity library, for instance. We will write a
TestCoin based on, for example, the PausableToken contract in
OpenZeppelin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="o">.</span><span class="mi">18</span><span class="p">;</span>

<span class="kn">import</span> <span class="s2">&quot;zeppelin-solidity/contracts/token/PausableToken.sol&quot;</span><span class="p">;</span>

<span class="n">contract</span> <span class="n">TestCoin</span> <span class="ow">is</span> <span class="n">PausableToken</span> <span class="p">{</span>
  <span class="n">string</span> <span class="n">public</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Test&quot;</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">public</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s2">&quot;TEST&quot;</span><span class="p">;</span>
  <span class="n">uint</span> <span class="n">public</span> <span class="n">decimals</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
  <span class="n">uint</span> <span class="n">public</span> <span class="n">INITIAL_SUPPLY</span> <span class="o">=</span> <span class="mi">100000000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="n">decimals</span><span class="p">);</span>

  <span class="n">function</span> <span class="n">TestCoin</span><span class="p">()</span> <span class="n">public</span> <span class="p">{</span>
    <span class="n">totalSupply</span> <span class="o">=</span> <span class="n">INITIAL_SUPPLY</span><span class="p">;</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">=</span> <span class="n">INITIAL_SUPPLY</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To understand better all the steps that the inheritance from
PausableToken has achieved in making our TestCoin a useful
ERC20-compliant token (and why it can be helpful to start from an open
source library like OpenZeppelin), you can follow closely the code of
each of the library’s files that were imported after each inheritance
and import is fully expanded.</p>
<p>For that, browsing the OpenZeppelin ERC20 token github repo will be very
helpful: our TestCoin is inheriting from PausableToken, which itself
inherits from StandardToken, which inherits from BasicToken and ERC20,
and so on all the way to ERC20Basic and the SafeMath library import.</p>
</div>
<div class="section" id="developing-your-smart-contract-directly">
<h3>Developing your smart contract directly<a class="headerlink" href="#developing-your-smart-contract-directly" title="Permalink to this headline">¶</a></h3>
<p>Another way of doing this is to simply write the ERC20 interface and
your contract implementing it directly from scratch. As you’ll see, this
is actually a fairly straightforward task:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.4</span><span class="o">.</span><span class="mi">16</span><span class="p">;</span>

<span class="n">contract</span> <span class="n">ERC20Token</span> <span class="p">{</span>
  <span class="n">uint256</span> <span class="n">public</span> <span class="n">totalSupply</span><span class="p">;</span>

  <span class="n">function</span> <span class="n">balanceOf</span><span class="p">(</span><span class="n">address</span> <span class="n">_owner</span><span class="p">)</span> <span class="n">public</span> <span class="n">constant</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint256</span> <span class="n">balance</span><span class="p">);</span>
  <span class="n">function</span> <span class="n">transfer</span><span class="p">(</span><span class="n">address</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">);</span>
  <span class="n">function</span> <span class="n">transferFrom</span><span class="p">(</span><span class="n">address</span> <span class="n">_from</span><span class="p">,</span> <span class="n">address</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">);</span>

  <span class="n">function</span> <span class="n">approve</span><span class="p">(</span><span class="n">address</span> <span class="n">_spender</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">);</span>

  <span class="n">function</span> <span class="n">allowance</span><span class="p">(</span><span class="n">address</span> <span class="n">_owner</span><span class="p">,</span> <span class="n">address</span> <span class="n">_spender</span><span class="p">)</span> <span class="n">public</span> <span class="n">constant</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint256</span> <span class="n">remaining</span><span class="p">);</span>

  <span class="n">event</span> <span class="n">Transfer</span><span class="p">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">);</span>
  <span class="n">event</span> <span class="n">Approval</span><span class="p">(</span><span class="n">address</span> <span class="n">indexed</span> <span class="n">_owner</span><span class="p">,</span> <span class="n">address</span> <span class="n">indexed</span> <span class="n">_spender</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">contract</span> <span class="n">TestToken</span> <span class="ow">is</span> <span class="n">ERC20Token</span> <span class="p">{</span>

  <span class="n">string</span>  <span class="n">public</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Test Coin&quot;</span><span class="p">;</span>
  <span class="n">string</span>  <span class="n">public</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s2">&quot;TEST&quot;</span><span class="p">;</span>
  <span class="n">uint8</span>   <span class="n">public</span> <span class="n">decimals</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
  <span class="n">uint256</span> <span class="n">public</span> <span class="n">INITIAL_SUPPLY</span> <span class="o">=</span> <span class="mi">100000000</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="n">uint256</span><span class="p">(</span><span class="n">decimals</span><span class="p">));</span>

  <span class="n">mapping</span> <span class="p">(</span><span class="n">address</span> <span class="o">=&gt;</span> <span class="n">uint256</span><span class="p">)</span> <span class="n">balances</span><span class="p">;</span>
  <span class="n">mapping</span> <span class="p">(</span><span class="n">address</span> <span class="o">=&gt;</span> <span class="n">mapping</span> <span class="p">(</span><span class="n">address</span> <span class="o">=&gt;</span> <span class="n">uint256</span><span class="p">))</span> <span class="n">allowed</span><span class="p">;</span>

  <span class="n">function</span> <span class="n">TestToken</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">totalSupply</span> <span class="o">=</span> <span class="n">INITIAL_SUPPLY</span><span class="p">;</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">=</span> <span class="n">INITIAL_SUPPLY</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">function</span> <span class="n">transfer</span><span class="p">(</span><span class="n">address</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">require</span><span class="p">(</span><span class="n">balances</span><span class="p">[</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_value</span> <span class="o">&amp;&amp;</span> <span class="n">balances</span><span class="p">[</span><span class="n">_to</span><span class="p">]</span> <span class="o">+</span> <span class="n">_value</span> <span class="o">&gt;</span> <span class="n">balances</span><span class="p">[</span><span class="n">_to</span><span class="p">]);</span>
    <span class="n">require</span><span class="p">(</span><span class="n">_to</span> <span class="o">!=</span> <span class="mh">0x0</span><span class="p">);</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">_to</span><span class="p">]</span> <span class="o">+=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">emit</span> <span class="n">Transfer</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">,</span> <span class="n">_to</span><span class="p">,</span> <span class="n">_value</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">function</span> <span class="n">transferFrom</span><span class="p">(</span><span class="n">address</span> <span class="n">_from</span><span class="p">,</span> <span class="n">address</span> <span class="n">_to</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">require</span><span class="p">(</span><span class="n">balances</span><span class="p">[</span><span class="n">_from</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_value</span> <span class="o">&amp;&amp;</span> <span class="n">allowed</span><span class="p">[</span><span class="n">_from</span><span class="p">][</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_value</span><span class="p">);</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">_to</span><span class="p">]</span> <span class="o">+=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">balances</span><span class="p">[</span><span class="n">_from</span><span class="p">]</span> <span class="o">-=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">allowed</span><span class="p">[</span><span class="n">_from</span><span class="p">][</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">-=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">emit</span> <span class="n">Transfer</span><span class="p">(</span><span class="n">_from</span><span class="p">,</span> <span class="n">_to</span><span class="p">,</span> <span class="n">_value</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">function</span> <span class="n">balanceOf</span><span class="p">(</span><span class="n">address</span> <span class="n">_owner</span><span class="p">)</span> <span class="n">public</span> <span class="n">constant</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint256</span> <span class="n">balance</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">balances</span><span class="p">[</span><span class="n">_owner</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="n">function</span> <span class="n">approve</span><span class="p">(</span><span class="n">address</span> <span class="n">_spender</span><span class="p">,</span> <span class="n">uint256</span> <span class="n">_value</span><span class="p">)</span> <span class="n">public</span> <span class="n">returns</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">allowed</span><span class="p">[</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">][</span><span class="n">_spender</span><span class="p">]</span> <span class="o">=</span> <span class="n">_value</span><span class="p">;</span>
    <span class="n">emit</span> <span class="n">Approval</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">,</span> <span class="n">_spender</span><span class="p">,</span> <span class="n">_value</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">function</span> <span class="n">allowance</span><span class="p">(</span><span class="n">address</span> <span class="n">_owner</span><span class="p">,</span> <span class="n">address</span> <span class="n">_spender</span><span class="p">)</span> <span class="n">public</span> <span class="n">constant</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint256</span> <span class="n">remaining</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">allowed</span><span class="p">[</span><span class="n">_owner</span><span class="p">][</span><span class="n">_spender</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Make sure to save your TestToken contract to a file on your computer
(e.g. TestToken.sol).</p>
</div>
</div>
<div class="section" id="compile-and-deploy-erc20-token-smart-contract">
<h2>Compile and deploy ERC20 token smart contract<a class="headerlink" href="#compile-and-deploy-erc20-token-smart-contract" title="Permalink to this headline">¶</a></h2>
<p>As a next step, you’ll need to generate the bytecode and ABI for your
new smart contract. You can think of the bytecode as basically your
contract’s compiled code. The ABI (Application Binary Interface) is a
JavaScript Object that defines how to interact with your smart contract.</p>
<p>We will show three ways of achieving this as well - using <a class="reference external" href="http://wallet.moac.io/">MOAC
wallet</a>, <a class="reference external" href="http://remix.ethereum.org/">Remix web IDE for Solidity
development</a>, or compiling using the solc
compiler on your machine (i.e. the command line).</p>
<div class="section" id="using-moac-wallet">
<h3>Using MOAC wallet<a class="headerlink" href="#using-moac-wallet" title="Permalink to this headline">¶</a></h3>
<p>MOAC wallet is an online free, client-side interface for using MOAC
wallets, make transactions and deploy contract. It was developed based
on open-source software. To use the service, you need to run a local
MOAC node with addition command line arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">rpccorsdomain</span> <span class="s2">&quot;http://wallet.moac.io&quot;</span>
</pre></div>
</div>
<p>This will allow the access of MOAC node using MOAC wallet.</p>
<p>Otherwise you will see the following error message:</p>
<div class="figure" id="id1">
<img alt="ERC20\_moacwallet01.png" src="_images/ERC20_moacwallet01.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet01.png</span></p>
</div>
<p>Example command to start a MOAC node connecting with mainnet:</p>
<p><code class="docutils literal notranslate"><span class="pre">moac</span> <span class="pre">--rpccorsdomain</span> <span class="pre">&quot;http://wallet.moac.io&quot;</span> <span class="pre">--rpc</span> <span class="pre">--rpcport</span> <span class="pre">&quot;8545&quot;</span> <span class="pre">--rpcapi</span> <span class="pre">&quot;chain3,mc,net,db&quot;</span></code></p>
<p>A successful interface connecting to mainnet looks like this:</p>
<div class="figure" id="id2">
<img alt="ERC20\_moacwallet02.png" src="_images/ERC20_moacwallet02.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet02.png</span></p>
</div>
<p>To compile the contract, click the “CONTRACTS” icon:</p>
<div class="figure" id="id3">
<img alt="ERC20\_moacwallet03.png" src="_images/ERC20_moacwallet03.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet03.png</span></p>
</div>
<p>Then enter the contract deploy page:</p>
<div class="figure" id="id4">
<img alt="ERC20\_moacwallet04.png" src="_images/ERC20_moacwallet04.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet04.png</span></p>
</div>
<p>Copy the source code and paste in the “SOLIDITY CONTRACT SOURCE CODE”
section. After copying the source code, the compiling process will
automatically started. If no errors are not found, the right side should
show a “SELECT CONTRACT TO DEPLOY” menu.</p>
<div class="figure" id="id5">
<img alt="ERC20\_moacwallet05.png" src="_images/ERC20_moacwallet05.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet05.png</span></p>
</div>
<p>Select the contract name “TokenERC20”:</p>
<div class="figure" id="id6">
<img alt="ERC20\_moacwallet06.png" src="_images/ERC20_moacwallet06.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet06.png</span></p>
</div>
<p>Input the parameters values from the menu:
</p>
<div class="figure" id="id7">
<img alt="ERC20\_moacwallet07.png" src="_images/ERC20_moacwallet07.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet07.png</span></p>
</div>
<p>You need to have enough balance to deploy the contract. You can choose the
amount of fee to use when deploying the contract. Click the DEPLOY
button:</p>
<div class="figure" id="id8">
<img alt="ERC20\_moacwallet08.png" src="_images/ERC20_moacwallet08.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet08.png</span></p>
</div>
<p>This is the contract ready to send from Account 1. The Provide gas is
estimated by the compiler and we suggest you use it or put a larger
number. If gas is not enough, the contract cannot be created. To
continue, be sure to unlock the account to create the contract. You can
use a console attached to the MOAC to do this:</p>
<div class="figure" id="id9">
<img alt="ERC20\_moacwallet09.png" src="_images/ERC20_moacwallet09.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet09.png</span></p>
</div>
<p>After deploying, the interface is returned to the main menu and you can
see the following transaction is creating.</p>
<div class="figure" id="id10">
<img alt="ERC20\_moacwallet10.png" src="_images/ERC20_moacwallet10.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet10.png</span></p>
</div>
<p>After 12 confirmations, you can start using
the contract by click the admin page link.</p>
<div class="figure" id="id11">
<img alt="ERC20\_moacwallet11.png" src="_images/ERC20_moacwallet11.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet11.png</span></p>
</div>
<p>MOAC wallet is good for beginners that only need basic contract
development needs. It cannot debug contracts. To advanced developers,
you can use Remix to work with contracts.</p>
</div>
<div class="section" id="remix">
<h3>Remix<a class="headerlink" href="#remix" title="Permalink to this headline">¶</a></h3>
<p>Remix is an online tool developed by Ethereum community to work with
smart contracts. MOAC also supports the deploy of smart contract through
Remix.</p>
<p>Open Remix on your browser, create a new file called ‘TestToken.sol’ and
copy paste the code of your smart contract. Make sure you are including
all the other Solidity files that your code is referencing with imports,
especially if you are using the open source library approach.</p>
<p>Select ‘TestToken’ in the Compile window then click “Start to Compile”
and the Details button next to TestToken. Upon scrolling in the popup
details window for TestToken, you should be able to see similar sections
to this Remix screenshot for the bytecode and ABI of your smart
contract:</p>
<p>If the contract is compiled successfully, remix will show the interface
like this:</p>
<div class="figure" id="id12">
<img alt="ERC20\_moacwallet12.png" src="_images/ERC20_moacwallet12.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet12.png</span></p>
</div>
<p>To deploy the contract, you need to connect
REMIX to a local or remote MOAC node. In addition to other arguments, be
sure to enable the access of REMIX to the MOAC node with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">moac</span> <span class="o">--</span><span class="n">rpccorsdomain</span> <span class="s2">&quot;http://remix.ethereum.org&quot;</span> <span class="o">--</span><span class="n">rpc</span> <span class="o">--</span><span class="n">rpcport</span> <span class="s2">&quot;8545&quot;</span> <span class="o">--</span><span class="n">rpcapi</span> <span class="s2">&quot;chain3,mc,net,db&quot;</span>
</pre></div>
</div>
<p>Click the Run Tab and you should see the following menu:</p>
<div class="figure" id="id13">
<img alt="ERC20\_moacwallet13.png" src="_images/ERC20_moacwallet13.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet13.png</span></p>
</div>
<p>Choose the Environment menu: JavaScript VM is a simulated environment of
Remix, it can be use to debugging the contract without actually
deploying the contract to a real network. Injected Web3 is the default
web3 connecting to Ethereum network. To deploy MOAC contract, you need
to choose Web3 Provider.</p>
<div class="figure" id="id14">
<img alt="ERC20\_moacwallet14.png" src="_images/ERC20_moacwallet14.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet14.png</span></p>
</div>
<p>After choose “Web3 Provider”, you can see a message like this:</p>
<p>Click “OK”,</p>
<div class="figure" id="id15">
<img alt="ERC20\_moacwallet15.png" src="_images/ERC20_moacwallet15.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet15.png</span></p>
</div>
<p>You need to make sure the port is the same as the local running node.</p>
<div class="figure" id="id16">
<img alt="ERC20\_moacwallet12.png" src="_images/ERC20_moacwallet16.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet12.png</span></p>
</div>
<p>You may see the error message like this:</p>
<div class="figure" id="id17">
<img alt="ERC20\_moacwallet17.png" src="_images/ERC20_moacwallet17.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet17.png</span></p>
</div>
<p>If you see this error message, check the local
node that include both</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">rpccorsdomain</span> <span class="s2">&quot;http://remix.ethereum.org&quot;</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">rpcport</span> <span class="s2">&quot;8545&quot;</span>
</pre></div>
</div>
<p>If the connection is established, you should see your accounts from the
Account List.</p>
<div class="figure" id="id18">
<img alt="ERC20\_moacwallet18.png" src="_images/ERC20_moacwallet18.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet18.png</span></p>
</div>
<p>Before you deploy the contract, you need to unlock the account that send
the contract. You can do the unlock with the MOAC console:</p>
<div class="figure" id="id19">
<img alt="ERC20\_moacwallet09.png" src="_images/ERC20_moacwallet09.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet09.png</span></p>
</div>
<p>After successfully deployed the contract, you should see the contract
address and other information showed in the menu:</p>
<div class="figure" id="id20">
<img alt="ERC20\_moacwallet19.png" src="_images/ERC20_moacwallet19.png" />
<p class="caption"><span class="caption-text">ERC20_moacwallet19.png</span></p>
</div>
<p>Remix is good for developing and debugging smart contracts. It is not
very convenient to deploy multiple contracts. If your requires to deploy
multiple contracts, you can use the Node.Js packages.</p>
</div>
<div class="section" id="using-the-node-js-packages">
<h3>Using the Node.Js packages<a class="headerlink" href="#using-the-node-js-packages" title="Permalink to this headline">¶</a></h3>
<p>You need to install solc package to compile the smart contract, and
chain3 package to deploy the contract.</p>
<p>To use the latest stable version of the Solidity compiler via Node.js
you can install it via npm:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">solc</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">solc</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;solc&#39;</span><span class="p">)</span>
<span class="n">var</span> <span class="nb">input</span> <span class="o">=</span> <span class="s1">&#39;contract x { function g() </span><span class="si">{}</span><span class="s1"> }&#39;</span>
<span class="o">//</span> <span class="n">Setting</span> <span class="mi">1</span> <span class="k">as</span> <span class="n">second</span> <span class="n">paramateractivates</span> <span class="n">the</span> <span class="n">optimiser</span>
<span class="n">var</span> <span class="n">output</span> <span class="o">=</span> <span class="n">solc</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">contractName</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">contracts</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">code</span> <span class="ow">and</span> <span class="n">ABI</span> <span class="n">that</span> <span class="n">are</span> <span class="n">needed</span> <span class="n">by</span> <span class="n">web3</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">contractName</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="n">output</span><span class="o">.</span><span class="n">contracts</span><span class="p">[</span><span class="n">contractName</span><span class="p">]</span><span class="o">.</span><span class="n">bytecode</span><span class="p">)</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">contractName</span> <span class="o">+</span> <span class="s1">&#39;; &#39;</span> <span class="o">+</span> <span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">contracts</span><span class="p">[</span><span class="n">contractName</span><span class="p">]</span><span class="o">.</span><span class="n">interface</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To deploy the contracts, you need to install the Chain3 package:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">chain3</span>
</pre></div>
</div>
<p>There is an example file in the package: example/contract_deploy.js</p>
<p>After successfully deploy, you should see the contract is displayed</p>
<p>Succeed!:
0x95d703ea48477f48335ae9c477ce6d986bc68453dfe3d6582714045456b93405</p>
<p>Using solc compiler to generate the ABI and bytecode Another way of
generating these two files is to compile your smart contract using the
solc compiler on your machine. If you haven’t used solc yet, you can
follow these instructions for installing it on your machine.</p>
<p>Open a Terminal window and navigate to your working directory where you
have saved your TestToken.sol file. Run the following command to export
the ‘TestToken.abi’ and ‘TestToken.bin’ files to the bin directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">solc</span> <span class="o">--</span><span class="nb">bin</span> <span class="o">--</span><span class="n">abi</span> <span class="o">-</span><span class="n">o</span> <span class="nb">bin</span> <span class="n">TestToken</span><span class="o">.</span><span class="n">sol</span>
</pre></div>
</div>
<p>As the file extensions suggest, ‘TestToken.abi’ contains your contract’s
ABI, and ‘TestToken.bin’ contains its bytecode.</p>
<p>If you prefer accessing the solc compiler from within a program’s code
to generate the ABI and bytecode files rather than using the command
line, you can use the following code instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">fs</span> <span class="o">=</span>  <span class="n">require</span> <span class="p">(</span> <span class="s1">&#39; fs &#39;</span> <span class="p">);</span>
<span class="n">var</span> <span class="n">solc</span> <span class="o">=</span>  <span class="n">requires</span> <span class="p">(</span> <span class="s1">&#39;solc&#39;</span> <span class="p">);</span>

<span class="n">var</span> <span class="n">cmds</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">argv</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">cmds</span> <span class="o">!=</span> <span class="n">null</span> <span class="o">&amp;&amp;</span> <span class="n">cmds</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">){</span>
  <span class="n">var</span> <span class="n">file</span> <span class="o">=</span> <span class="n">cmds</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">var</span> <span class="n">name</span> <span class="o">=</span> <span class="n">cmds</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="n">var</span> <span class="n">content</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>

  <span class="n">was</span> <span class="nb">input</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">file</span><span class="p">:</span> <span class="n">content</span>
  <span class="p">};</span>

  <span class="n">var</span> <span class="n">output</span> <span class="o">=</span> <span class="n">solc</span><span class="o">.</span><span class="n">compile</span><span class="p">({</span><span class="n">sources</span><span class="p">:</span> <span class="nb">input</span><span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;contracts&#39;</span><span class="p">,</span> <span class="n">Object</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">contracts</span><span class="p">));</span>

  <span class="n">var</span> <span class="n">ctt</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">contracts</span><span class="p">[</span><span class="n">name</span><span class="p">];</span>
  <span class="k">if</span><span class="p">(</span><span class="n">ctt</span> <span class="o">==</span> <span class="n">null</span><span class="p">){</span>
      <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">var</span> <span class="n">bytecode</span> <span class="o">=</span> <span class="n">ctt</span><span class="o">.</span><span class="n">bytecode</span><span class="p">;</span>
  <span class="n">var</span> <span class="n">abi</span> <span class="o">=</span> <span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ctt</span><span class="o">.</span><span class="n">interface</span><span class="p">);</span>

  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;bytecode&#39;</span><span class="p">,</span> <span class="n">bytecode</span><span class="p">);</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;abi&#39;</span><span class="p">,</span> <span class="n">ctt</span><span class="o">.</span><span class="n">interface</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Regardless of which method you followed, you should now have the ABI and
bytecode files for your TestToken smart contract. Next, you will be able
to deploy your token contract on the MOAC blockchain for others to
interact with it.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ERC721.html" class="btn btn-neutral float-right" title="ERC721 Token" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Differences-Between-Wallet-Types.html" class="btn btn-neutral" title="Differences Between Wallet Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MOAC foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>